<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.16) on Tue May 14 12:41:47 UTC 2024 -->
<title>AuthorizationDecisionHandlerSpi (com.authlete:authlete-java-jaxrs 2.74 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-05-14">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AuthorizationDecisionHandlerSpi (com.authlete:authlete-java-jaxrs 2.74 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":38,"i8":6,"i9":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AuthorizationDecisionHandlerSpi.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.authlete.jaxrs.spi</a></div>
<h2 title="Interface AuthorizationDecisionHandlerSpi" class="title">Interface AuthorizationDecisionHandlerSpi</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="AuthorizationDecisionHandlerSpiAdapter.html" title="class in com.authlete.jaxrs.spi">AuthorizationDecisionHandlerSpiAdapter</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">AuthorizationDecisionHandlerSpi</span></pre>
<div class="block">Service Provider Interface to work with <a href="../AuthorizationDecisionHandler.html" title="class in com.authlete.jaxrs"><code>AuthorizationDecisionHandler</code></a>.

 <p>
 An implementation of this interface must be given to the constructor
 of <a href="../AuthorizationDecisionHandler.html" title="class in com.authlete.jaxrs"><code>AuthorizationDecisionHandler</code></a> class.
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Takahiko Kawasaki</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAcr()">getAcr</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the authentication context class reference (ACR) that was
 satisfied when the current end-user was authenticated.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>com.authlete.common.dto.Property[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getProperties()">getProperties</a></span>()</code></th>
<td class="colLast">
<div class="block">Get extra properties to associate with an access token and/or an
 authorization code.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getScopes()">getScopes</a></span>()</code></th>
<td class="colLast">
<div class="block">Get scopes to associate with an access token and/or an authorization code.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSub()">getSub</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the value of the "sub" claim to be used in the id_token.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUserAuthenticatedAt()">getUserAuthenticatedAt</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the time when the end-user was authenticated.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUserClaim(java.lang.String,java.lang.String)">getUserClaim</a></span>&#8203;(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;claimName,
            <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;languageTag)</code></th>
<td class="colLast">
<div class="block">Get the value of a claim of the user.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUserSubject()">getUserSubject</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the subject (= unique identifier) of the end-user.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;com.authlete.common.assurance.VerifiedClaims&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getVerifiedClaims(java.lang.String,com.authlete.common.assurance.constraint.VerifiedClaimsConstraint)">getVerifiedClaims</a></span>&#8203;(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;subject,
                 com.authlete.common.assurance.constraint.VerifiedClaimsConstraint&nbsp;constraint)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getVerifiedClaims(java.lang.String,java.lang.Object)">getVerifiedClaims</a></span>&#8203;(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;subject,
                 <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&nbsp;verifiedClaimsRequest)</code></th>
<td class="colLast">
<div class="block">Get the verified claims of the user to be embedded in the ID token.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isClientAuthorized()">isClientAuthorized</a></span>()</code></th>
<td class="colLast">
<div class="block">Get the decision on the authorization request.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="isClientAuthorized()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isClientAuthorized</h4>
<pre class="methodSignature">boolean&nbsp;isClientAuthorized()</pre>
<div class="block">Get the decision on the authorization request.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the end-user has decided to grant
         authorization to the client application. Otherwise,
         <code>false</code>.</dd>
</dl>
</li>
</ul>
<a id="getUserAuthenticatedAt()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserAuthenticatedAt</h4>
<pre class="methodSignature">long&nbsp;getUserAuthenticatedAt()</pre>
<div class="block">Get the time when the end-user was authenticated.

 <p>
 For example, if an authorization always requires an end-user
 to login, the authentication time is always "just now", so
 the implementation of this method will be like the following.
 </p>

 <blockquote>
 <pre style="border: 1px solid gray; padding: 0.5em; margin: 1em;">
 <span style="color: gray;">&#x40;Override</span>
 <span style="color: purple; font-weight: bold;">public long</span> getUserAuthenticatedAt()
 {
     <span style="color: purple; font-weight: bold;">return</span> System.currentTimeMillis() / 1000;
 }</pre>
 </blockquote>

 <p>
 This method is not called when <a href="#isClientAuthorized()"><code>isClientAuthorized()</code></a>
 has returned <code>false</code>.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The time when the end-user authentication occurred.
         The number of seconds since Unix epoch (1970-01-01).
         Return 0 if the time is unknown.</dd>
</dl>
</li>
</ul>
<a id="getUserSubject()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserSubject</h4>
<pre class="methodSignature"><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getUserSubject()</pre>
<div class="block">Get the subject (= unique identifier) of the end-user.
 It must consist of only ASCII letters and its length
 must not exceed 100.

 <p>
 In a typical case, the subject is a primary key or another
 unique ID of the record that represents the end-user in
 your user database.
 </p>

 <p>
 This method is not called when <a href="#isClientAuthorized()"><code>isClientAuthorized()</code></a>
 has returned <code>false</code>.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The subject (= unique identifier) of the end-user.
         Returning <code>null</code> makes the authorization
         request fail.</dd>
</dl>
</li>
</ul>
<a id="getAcr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAcr</h4>
<pre class="methodSignature"><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getAcr()</pre>
<div class="block">Get the authentication context class reference (ACR) that was
 satisfied when the current end-user was authenticated.

 <p>
 The value returned by this method has an important meaning only
 when an authorization requests <code>acr</code> claim as an essential
 claim. Practically speaking, it is unlikely to happen. See "<a href="http://openid.net/specs/openid-connect-core-1_0.html#acrSemantics">5.5.1.1. Requesting the "acr" Claim</a>" in <a href="http://openid.net/specs/openid-connect-core-1_0.html">OpenID
 Connect Core 1.0</a> if you are interested in the details.
 </p>

 <p>
 If you don't know what ACR is, return <code>null</code>.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The authentication context class reference (ACR) that
         was satisfied when the current end-user was authenticated.</dd>
</dl>
</li>
</ul>
<a id="getUserClaim(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserClaim</h4>
<pre class="methodSignature"><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&nbsp;getUserClaim&#8203;(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;claimName,
                    <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;languageTag)</pre>
<div class="block">Get the value of a claim of the user.

 <p>
 This method may be called multiple times. On the other hand,
 this method is not called when <a href="#isClientAuthorized()"><code>isClientAuthorized()</code></a>
 has returned <code>false</code> or when <a href="#getUserSubject()"><code>getUserSubject()</code></a>
 has returned <code>null</code>.
 </p>

 <p>
 If the claim name starts with two colons (<code>::</code>), the claim is a
 predefined <i>transformed claim</i>. The value of the claim will be
 computed by Authlete, so the exact value returned by this method is
 not so important. If this method returns a non-null value, the value
 of the transformed claim will be computed by Authlete and embedded in
 the ID token.
 </p>

 <p>
 Likewise, if the claim name starts with one colon (<code>:</code>), the claim
 is a <i>transformed claim</i> defined in the <code>"transformed_claims"</code>
 property in the <code>claims</code> request parameter. If this method returns
 a non-null value, the value of the transformed claim will be computed by
 Authlete and embedded in the ID token.
 </p>

 <p>
 See <a href="https://bitbucket.org/openid/ekyc-ida/src/master/openid-advanced-syntax-for-claims.md">OpenID Connect Advanced Syntax for Claims (ASC) 1.0</a> for details
 about transformed claims.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>claimName</code> - A claim name such as <code>name</code> and <code>family_name</code>.
         Standard claim names are listed in "<a href="http://openid.net/specs/openid-connect-core-1_0.html#StandardClaims">5.1. Standard Claims</a>" of <a href="http://openid.net/specs/openid-connect-core-1_0.html">OpenID
         Connect Core 1.0</a>. Java constant values that represent the
         standard claims are listed in <code>StandardClaims</code> class. The value of <code>claimName</code> does NOT
         contain a language tag.</dd>
<dd><code>languageTag</code> - A language tag such as <code>en</code> and <code>ja</code>. Implementations
         should take this into account whenever possible. See "<a href="http://openid.net/specs/openid-connect-core-1_0.html#ClaimsLanguagesAndScripts">5.2. Claims Languages and Scripts</a>" in <a href="http://openid.net/specs/openid-connect-core-1_0.html">OpenID
         Connect Core 1.0</a> for details.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The claim value. <code>null</code> if the claim value of the claim
         is not available.</dd>
</dl>
</li>
</ul>
<a id="getProperties()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProperties</h4>
<pre class="methodSignature">com.authlete.common.dto.Property[]&nbsp;getProperties()</pre>
<div class="block">Get extra properties to associate with an access token and/or an
 authorization code.

 <p>
 This method is expected to return an array of extra properties.
 The following is an example that returns an array containing one
 extra property.
 </p>

 <pre style="border: 1px solid gray; padding: 0.5em; margin: 1em;">
 <span style="color: gray;">&#x40;Override</span>
 <span style="color: purple; font-weight: bold;">public</span> <code>Property</code>[] getProperties()
 {
     <span style="color: purple; font-weight: bold;">return</span> <span style="color: purple; font-weight: bold;">new</span> <code>Property</code>[] {
         <span style="color: purple; font-weight: bold;">new</span> <code>Property</code>(<span style="color: darkred;">"example_parameter"</span>, <span style="color: darkred;">"example_value"</span>)
     };
 }</pre>
 </blockquote>

 <p>
 Extra properties returned from this method will appear as top-level entries
 in a JSON response from an authorization server as shown in <a href="https://tools.ietf.org/html/rfc6749#section-5.1">5.1. Successful Response</a>
 in RFC 6749.
 </p>

 <p>
 Keys listed below should not be used and they would be ignored on
 the server side even if they were used. It's because they are reserved
 in <a href="https://tools.ietf.org/html/rfc6749">RFC 6749</a> and
 <a href="http://openid.net/specs/openid-connect-core-1_0.html">OpenID Connect Core 1.0</a>.
 </p>

 <ul>
   <li><code>access_token</code>
   <li><code>token_type</code>
   <li><code>expires_in</code>
   <li><code>refresh_token</code>
   <li><code>scope</code>
   <li><code>error</code>
   <li><code>error_description</code>
   <li><code>error_uri</code>
   <li><code>id_token</code>
 </ul>

 <p>
 Note that <b>there is an upper limit on the total size of extra properties</b>.
 On the server side, the properties will be (1) converted to a multidimensional
 string array, (2) converted to JSON, (3) encrypted by AES/CBC/PKCS5Padding, (4)
 encoded by base64url, and then stored into the database. The length of the
 resultant string must not exceed 65,535 in bytes. This is the upper limit, but
 we think it is big enough.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Extra properties. If <code>null</code> is returned, any extra property will
         not be associated.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.3</dd>
</dl>
</li>
</ul>
<a id="getScopes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getScopes</h4>
<pre class="methodSignature"><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>[]&nbsp;getScopes()</pre>
<div class="block">Get scopes to associate with an access token and/or an authorization code.

 <p>
 If <code>null</code> is returned, the scopes specified in the original
 authorization request from the client application are used. In other
 cases, including the case of an empty array, the specified scopes will
 replace the original scopes contained in the original authorization
 request.
 </p>

 <p>
 Even scopes that are not included in the original authorization request
 can be specified. However, as an exception, <code>"openid"</code> scope
 is ignored on the server side if it is not included in the original
 request. It is because the existence of <code>"openid"</code> scope
 considerably changes the validation steps and because adding
 <code>"openid"</code> triggers generation of an ID token (although the
 client application has not requested it) and the behavior is a major
 violation against the specification.
 </p>

 <p>
 If you add <code>"offline_access"</code> scope although it is not
 included in the original request, keep in mind that the specification
 requires explicit consent from the user for the scope (<a href="http://openid.net/specs/openid-connect-core-1_0.html#OfflineAccess">OpenID Connect Core 1.0, 11. Offline Access</a>). When
 <code>"offline_access"</code> is included in the original request, the
 current implementation of Authlete's /api/auth/authorization API checks
 whether the request has come along with <code>prompt</code> request
 parameter and the value includes <code>"consent"</code>. However, note
 that the implementation of Authlete's /api/auth/authorization/issue API
 does not perform such checking if <code>"offline_access"</code> scope
 is added via this <code>scopes</code> parameter.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Scopes to associate with an authorization code and/or an access
         token. If a non-null value is set, the original scopes requested
         by the client application are replaced.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>1.4</dd>
</dl>
</li>
</ul>
<a id="getSub()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSub</h4>
<pre class="methodSignature"><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;getSub()</pre>
<div class="block">Get the value of the "sub" claim to be used in the id_token.

 <p>
 If doing a pairwise subject derivation, this method should check the
 registration of the current Client to see if it has a PAIRWISE subject
 identifier type. If so, it returns the calculated string of that subject.
 If not, it returns <code>null</code> and the value of <a href="#getUserSubject()"><code>getUserSubject()</code></a>
 is used by the API instead.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of the "sub" claim to be used in the id_token,
         or <code>null</code> if no such subject exists.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.22</dd>
</dl>
</li>
</ul>
<a id="getVerifiedClaims(java.lang.String,com.authlete.common.assurance.constraint.VerifiedClaimsConstraint)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVerifiedClaims</h4>
<pre class="methodSignature"><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;com.authlete.common.assurance.VerifiedClaims&gt;&nbsp;getVerifiedClaims&#8203;(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;subject,
                                                                     com.authlete.common.assurance.constraint.VerifiedClaimsConstraint&nbsp;constraint)</pre>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span></div>
<div class="block">Get the verified claims of the user to be embedded in the ID token.

 <p>
 <b>NOTE</b>: Since version 2.42, this method is called only when the
 <a href="../AuthorizationDecisionHandler.Params.html#isOldIdaFormatUsed()"><code>isOldIdaFormatUsed()</code></a> method of
 <a href="../AuthorizationDecisionHandler.Params.html" title="class in com.authlete.jaxrs"><code>AuthorizationDecisionHandler.Params</code></a> returns true. See the description
 of the method for details.
 </p>

 <p>
 An authorization request may contain a <code>"claims"</code> request parameter.
 The value of the request parameter is JSON which conforms to the format
 defined in <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClaimsParameter">5.5. Requesting Claims using the "claims" Request Parameter</a> of
 <a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID
 Connect Core 1.0</a>. The JSON may contain an <code>"id_token"</code> property.
 The value of the property is a JSON object which lists claims that the
 client application wants to be embedded in the ID token. The following
 is an example shown in the section.
 </p>

 <pre>
 {
  "userinfo":
   {
    "given_name": {"essential": true},
    "nickname": null,
    "email": {"essential": true},
    "email_verified": {"essential": true},
    "picture": null,
    "http://example.info/claims/groups": null
   },
  "id_token":
   {
    "auth_time": {"essential": true},
    "acr": {"values": ["urn:mace:incommon:iap:silver"] }
   }
 }
 </pre>

 <p>
 <a href="https://openid.net/specs/openid-connect-4-identity-assurance-1_0.html">OpenID Connect for Identity Assurance 1.0</a> has extended this mechanism
 to allow client applications to request <b>verified claims</b>. To request
 verified claims, a <code>"verified_claims"</code> property is included in the
 <code>"id_token"</code> property like below.
 </p>

 <pre>
 {
   "id_token": {
     "verified_claims": {
       "verification": {
         "trust_framework": {
           "value": "de_aml"
         },
         "evidence": [
           {
             "type": {
               "value": "id_document"
             },
             "method": {
               "value": "pipp"
             },
             "document": {
               "type": {
                 "values": [
                   "idcard",
                   "passport"
                 ]
               }
             }
           }
         ]
       },
       "claims": {
         "given_name": null,
         "family_name": {
           "essential": true
         },
         "birthdate": {
           "purpose": "To send you best wishes on your birthday"
         }
       }
     }
   }
 }
 </pre>

 <p>
 This method should return the requested verified claims.
 </p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>subject</code> - The subject of the user. The same value returned by
         <a href="#getUserSubject()"><code>getUserSubject()</code></a>.</dd>
<dd><code>constraint</code> - An object that represents the <code>"verified_claims"</code> in the
         <code>"id_token"</code> property.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The verified claims. The returned value is embedded in the ID
         token as the value of the <code>"verified_claims"</code> claim.
         If this method returns null, the <code>"verified_claims"</code> claim
         does not appear in the ID token.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.25</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getVerifiedClaims(java.lang.String,java.lang.Object)"><code>getVerifiedClaims(String, Object)</code></a></dd>
</dl>
</li>
</ul>
<a id="getVerifiedClaims(java.lang.String,java.lang.Object)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getVerifiedClaims</h4>
<pre class="methodSignature"><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&nbsp;getVerifiedClaims&#8203;(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;subject,
                         <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&nbsp;verifiedClaimsRequest)</pre>
<div class="block">Get the verified claims of the user to be embedded in the ID token.

 <p>
 An authorization request may contain a <code>"claims"</code> request parameter.
 The value of the request parameter is JSON which conforms to the format
 defined in <a href="https://openid.net/specs/openid-connect-core-1_0.html#ClaimsParameter">5.5. Requesting Claims using the "claims" Request Parameter</a> of
 <a href="https://openid.net/specs/openid-connect-core-1_0.html">OpenID
 Connect Core 1.0</a>. The JSON may contain an <code>"id_token"</code> property.
 The value of the property is a JSON object which lists claims that the
 client application wants to be embedded in the ID token. The following
 is an example shown in the section.
 </p>

 <pre>
 {
  "userinfo":
   {
    "given_name": {"essential": true},
    "nickname": null,
    "email": {"essential": true},
    "email_verified": {"essential": true},
    "picture": null,
    "http://example.info/claims/groups": null
   },
  "id_token":
   {
    "auth_time": {"essential": true},
    "acr": {"values": ["urn:mace:incommon:iap:silver"] }
   }
 }
 </pre>

 <p>
 <a href="https://openid.net/specs/openid-connect-4-identity-assurance-1_0.html">OpenID Connect for Identity Assurance 1.0</a> has extended this mechanism
 to allow client applications to request <b>verified claims</b>. To request
 verified claims, a <code>"verified_claims"</code> property is included in the
 <code>"id_token"</code> property like below.
 </p>

 <pre>
 {
   "id_token": {
     "verified_claims": {
       "verification": {
         "trust_framework": null,
         "time": null,
         "evidence": [
           {
             "type": {
               "value": "document"
             },
             "method": null,
             "document_details": {
               "type": null
             }
           }
         ]
       },
       "claims": {
         "given_name": null,
         "family_name": null,
         "birthdate": null
       }
     }
   }
 }
 </pre>

 <p>
 The second argument (<code>verifiedClaimsRequest</code>) of this method
 represents the value of <code>"verified_claims"</code> in the request.
 It is a <code>Map</code> instance or a <code>List</code> instance. The latter
 case happens when the value of <code>"verified_claims"</code> is a JSON
 array like below.
 </p>

 <pre>
 {
   "id_token": {
     "verified_claims": [
       {
         "verification": {
           "trust_framework": {
             "value": "gold"
           },
           "evidence": [
             {
               "type": {
                 "value": "document"
               }
             }
           ]
         },
         "claims": {
           "given_name": null,
           "family_name": null
         }
       },
       {
         "verification": {
           "trust_framework": {
             "values": [
               "silver",
               "bronze"
             ]
           },
           "evidence": [
             {
               "type": {
                 "value": "vouch"
               }
             }
           ]
         },
         "claims": {
           "given_name": null,
           "family_name": null
         }
       }
     ]
   }
 }
 </pre>

 <p>
 When the given argument is a <code>Map</code> instance, it can be cast by
 <code>Map&lt;String, Object&gt;</code>. On the other hand, in the case of a
 <code>List</code> instance, each element in the list can be cast by
 <code>Map&lt;String, Object&gt;</code>.
 </p>

 <p>
 This method should return a <code>Map</code> instance or a <code>List</code>
 instance which represents the value of <code>"verified_claims"</code>. The
 value will be embedded in the ID token as the value of
 <code>"verified_claims"</code>.
 </p>

 <p>
 For example, to make an ID token include <code>"verified_claims"</code> like
 below,
 </p>

 <pre>
 "verified_claims": {
   "verification": {
     "trust_framework": "trust_framework_example"
   },
   "claims": {
     "given_name": "Max",
     "family_name": "Meier"
   }
 }
 </pre>

 this method should build a <code>Map</code> instance like below and return it.

 <pre>
 Map&lt;String, Object&gt; verification = new HashMap&lt;&gt;();
 verification.put("trust_framework", "trust_framework_example");

 Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();
 claims.put("given_name", "Max");
 claims.put("family_name", "Meier");

 Map&lt;String, Object&gt; verified_claims = new HashMap&lt;&gt;();
 verified_claims.put("verification", verification);
 verified_claims.put("claims", claims);

 return verified_claims;
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>subject</code> - The subject of the user. The same value returned by
         <a href="#getUserSubject()"><code>getUserSubject()</code></a>.</dd>
<dd><code>verifiedClaimsRequest</code> - An object that represents the <code>"verified_claims"</code> in the
         <code>"id_token"</code> property in the <code>"claims"</code> request
         parameter. Either a <code>Map</code> instance or a <code>List</code>
         instance.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The verified claims. The returned value is embedded in the ID
         token as the value of <code>"verified_claims"</code>. If this method
         returns null, <code>"verified_claims"</code> does not appear in the
         ID token.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>2.42</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://openid.net/specs/openid-connect-4-identity-assurance-1_0.html">OpenID Connect for Identity Assurance 1.0</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AuthorizationDecisionHandlerSpi.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2024. All rights reserved.</small></p>
</footer>
</body>
</html>
